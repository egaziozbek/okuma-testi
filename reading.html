<!-- ... diğer kodlar aynı kalıyor ... -->
<p id="readingText" style="display:none;">Yükleniyor...</p>
<!-- ... -->

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCLp-t81vU5S1LDr76YKszeG1LcHwU0GZQ",
    authDomain: "okuma-testi.firebaseapp.com",
    projectId: "okuma-testi",
    storageBucket: "okuma-testi.appspot.com",
    messagingSenderId: "820936161658",
    appId: "1:820936161658:web:0bd9c4dc043cfad0667ec3",
    measurementId: "G-2WBL96ETV1"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let metin = "";

  async function fetchText() {
    const docRef = doc(db, "ayarlar", "okumaMetni");
    const docSnap = await getDoc(docRef);
    if (docSnap.exists()) {
      metin = docSnap.data().metin;
    } else {
      metin = "Okuma metni bulunamadı.";
    }
  }

  fetchText();

  let startTime, timerInterval;

  window.startReading = function () {
    document.getElementById("readingText").innerText = metin;
    document.getElementById("readingText").style.display = "block";
    startTime = Date.now();
    document.getElementById("startBtn").style.display = "none";
    document.getElementById("finishBtn").style.display = "inline-block";

    timerInterval = setInterval(() => {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      document.getElementById("timer").innerText = "Süre: " + elapsed + " saniye";
    }, 1000);
  }

  window.finishReading = function () {
    clearInterval(timerInterval);
    const totalSeconds = Math.floor((Date.now() - startTime) / 1000);
    const text = document.getElementById("readingText").innerText.trim();
    const wordCount = text.split(/\s+/).length;

    localStorage.setItem("readingTime", totalSeconds);
    localStorage.setItem("kelimeSayisi", wordCount);

    window.location.href = "questions.html";
  }
</script>
